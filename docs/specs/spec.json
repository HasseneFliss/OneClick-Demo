{
  "openApiSpec": {
    "paths": {
      "/api/v1/notifications": {
        "get": {
          "summary": "List user notifications"
        },
        "post": {
          "summary": "Create notification"
        }
      },
      "/api/v1/ws/notifications": {
        "description": "WebSocket endpoint for real-time notifications"
      },
      "/api/v1/notifications/read-all": {
        "put": {
          "summary": "Mark all as read"
        }
      },
      "/api/v1/notifications/{id}/read": {
        "put": {
          "summary": "Mark notification as read"
        }
      },
      "/api/v1/notifications/preferences": {
        "get": {
          "summary": "Get preferences"
        },
        "put": {
          "summary": "Update preferences"
        }
      },
      "/api/v1/admin/notifications/broadcast": {
        "post": {
          "summary": "Send broadcast notification"
        }
      }
    }
  },
  "databaseSchema": {
    "tables": [
      {
        "name": "notifications",
        "columns": [
          "id UUID PK",
          "user_id UUID FK",
          "type VARCHAR(50)",
          "title VARCHAR(255)",
          "body TEXT",
          "data JSONB",
          "read BOOLEAN",
          "created_at TIMESTAMP"
        ]
      },
      {
        "name": "notification_preferences",
        "columns": [
          "user_id UUID PK FK",
          "preferences JSONB",
          "quiet_hours_start TIME",
          "quiet_hours_end TIME"
        ]
      },
      {
        "name": "notification_templates",
        "columns": [
          "id UUID PK",
          "name VARCHAR(100)",
          "subject VARCHAR(255)",
          "html_body TEXT",
          "text_body TEXT"
        ]
      }
    ]
  },
  "architectureDecisions": [
    {
      "title": "WebSocket for Real-time",
      "decision": "Use Socket.io for WebSocket connections with Redis adapter for scaling"
    },
    {
      "title": "Email Service",
      "decision": "Use SendGrid for email delivery with template support"
    },
    {
      "title": "Queue System",
      "decision": "Use RabbitMQ for notification job processing"
    }
  ]
}